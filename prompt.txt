You are a kubernetes scaling expert. You are given a set of metrics and you need to determine if the pods in a deployment should be scaled up or down.\n    Based on your determination, you will just return the number of pods to scale up to or down to, nothing else.\n    Remember, my target is to save money but not compromise performance.\n    You will be given some prometheus metrics. Among the provided metrics, you will find the following metrics:\n    - Current replica information of the deployment\n    - CPU usage of the pods of the deployment\n    - Memory usage of the pods of the deployment\n    You might also given resource and limits of the pods of the deployment.\n    There might be other metrics as well. You will also given the promql, so figure out yourself which metrics are relevant.\n    In this metrics, you will find timestamp and value of the metrics. Timestamp is in unix time. Focus on the change of the metrics value over time.\n    Here are the promql and their corresponding metrics-\n    Deployment replicas - promql: kube_deployment_spec_replicas{deployment="cpuload", namespace="default"} metrics: {"status":"success","data":{"resultType":"matrix","result":[{"metric":{"__name__":"kube_deployment_spec_replicas","app_kubernetes_io_component":"metrics","app_kubernetes_io_instance":"prometheus","app_kubernetes_io_managed_by":"Helm","app_kubernetes_io_name":"kube-state-metrics","app_kubernetes_io_part_of":"kube-state-metrics","app_kubernetes_io_version":"2.14.0","deployment":"cpuload","helm_sh_chart":"kube-state-metrics-5.27.0","instance":"10.244.0.135:8080","job":"kubernetes-service-endpoints","namespace":"default","node":"minikube","service":"prometheus-kube-state-metrics"},"values":[[1735559141,"2"],[1735559201,"2"],[1735559261,"2"],[1735559321,"2"]]}]}}\nCPU usage - promql: avg(rate(container_cpu_usage_seconds_total{pod=~"cpuload-846595ccbf-jkqwd|cpuload-846595ccbf-jvdf7", namespace="default"}[5m])) metrics: {"status":"success","data":{"resultType":"matrix","result":[{"metric":{},"values":[[1735559201,"0.00009970023044076934"],[1735559261,"0.0001438556399681949"],[1735559321,"0.0001826591759836641"]]}]}}\nRAM usage - promql: avg(container_memory_usage_bytes{pod=~"cpuload-846595ccbf-jkqwd|cpuload-846595ccbf-jvdf7", namespace="default"}) metrics: {"status":"success","data":{"resultType":"matrix","result":[{"metric":{},"values":[[1735559141,"31229952"],[1735559201,"31229952"],[1735559261,"31229952"],[1735559321,"31229952"]]}]}}\n\n    '

Deployment replicas - promql: kube_deployment_spec_replicas{deployment="cpuload", namespace="cpuload"} metrics: {"status":"success","data":{"resultType":"matrix","result":[{"metric":{"__name__":"kube_deployment_spec_replicas","app_kubernetes_io_component":"metrics","app_kubernetes_io_instance":"prometheus","app_kubernetes_io_managed_by":"Helm","app_kubernetes_io_name":"kube-state-metrics","app_kubernetes_io_part_of":"kube-state-metrics","app_kubernetes_io_version":"2.14.0","deployment":"cpuload","helm_sh_chart":"kube-state-metrics-5.27.0","instance":"10.244.0.135:8080","job":"kubernetes-service-endpoints","namespace":"cpuload","node":"minikube","service":"prometheus-kube-state-metrics"},"values":[[1735631759,"2"],[1735631819,"2"],[1735631879,"2"],[1735631939,"2"],[1735631999,"2"],[1735632059,"2"]]}]}}
CPU usage - promql: rate(container_cpu_usage_seconds_total{pod=~"cpuload-76db646b5b-7tlc8|cpuload-76db646b5b-kb2fj", namespace="cpuload"}[2m]) metrics: {"status":"success","data":{"resultType":"matrix","result":[{"metric":{"beta_kubernetes_io_arch":"amd64","beta_kubernetes_io_os":"linux","cpu":"total","id":"/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-podb4e7981d_2930_497d_a2ab_fde3196ce45a.slice","instance":"minikube","job":"kubernetes-nodes-cadvisor","kubernetes_io_arch":"amd64","kubernetes_io_hostname":"minikube","kubernetes_io_os":"linux","minikube_k8s_io_commit":"210b148df93a80eb872ecbeb7e35281b3c582c61","minikube_k8s_io_name":"minikube","minikube_k8s_io_primary":"true","minikube_k8s_io_updated_at":"2024_11_25T17_14_33_0700","minikube_k8s_io_version":"v1.34.0","namespace":"cpuload","pod":"cpuload-76db646b5b-kb2fj"},"values":[[1735631759,"0.00016263666108043046"],[1735631819,"0.00018572786456000977"],[1735631879,"0.00015244436926195883"],[1735631939,"0.00020248705998582008"],[1735631999,"0.00013385476054737368"],[1735632059,"0.0002052974774686851"]]},{"metric":{"beta_kubernetes_io_arch":"amd64","beta_kubernetes_io_os":"linux","cpu":"total","id":"/kubepods.slice/kubepods-burstable.slice/kubepods-burstable-podeff15d74_3a7e_4a5b_9f45_138a35a75e94.slice","instance":"minikube","job":"kubernetes-nodes-cadvisor","kubernetes_io_arch":"amd64","kubernetes_io_hostname":"minikube","kubernetes_io_os":"linux","minikube_k8s_io_commit":"210b148df93a80eb872ecbeb7e35281b3c582c61","minikube_k8s_io_name":"minikube","minikube_k8s_io_primary":"true","minikube_k8s_io_updated_at":"2024_11_25T17_14_33_0700","minikube_k8s_io_version":"v1.34.0","namespace":"cpuload","pod":"cpuload-76db646b5b-7tlc8"},"values":[[1735631759,"0.5000037016585854"],[1735631819,"0.49972796010296505"],[1735631879,"0.5001013997542157"],[1735631939,"0.4998822602986637"],[1735631999,"0.3630224082896246"],[1735632059,"0.00021180537460740992"]]}]}}
RAM usage - promql: avg(container_memory_usage_bytes{pod=~"cpuload-76db646b5b-7tlc8|cpuload-76db646b5b-kb2fj", namespace="cpuload"}) metrics: {"status":"success","data":{"resultType":"matrix","result":[{"metric":{},"values":[[1735631759,"88582144"],[1735631819,"88848384"],[1735631879,"88686592"],[1735631939,"88887296"],[1735631999,"20809728"],[1735632059,"20809728"]]}]}}
Resource request and limits: CPU Resource Requests: 200m, CPU Resource Limits: 500m, Memory Resource Requests: 64Mi, Memory Resource Limits: 150Mi